# 결속 (Gyeolsok)

심리·사회복지 전문가가 가족 관계와 감정 흐름을 빠르게 맵핑하는 Genogram 툴입니다.

## 🎯 핵심 기능

### 📊 템플릿 & 시작
- **빈 캔버스**: 완전히 새로운 구조로 자유롭게 시작
- **1가족 3세대**: 조부모-부모-자녀 구조의 표준 템플릿 (권장)
- **2가족 3세대**: 재혼 가정이나 복잡한 가족 구조용
- **3세대 확장**: 4세대까지 확장 가능
- TemplateGenerator가 인물, 부부, 부모-자식 관계를 자동 생성
- AutoLayout이 CT(Client) 중심으로 자동 배치

### 👥 인물 관리
- **빠른 추가**: 우클릭 메뉴로 부모/자녀/형제자매/배우자 즉시 추가
  - 아버지/어머니 추가
  - 아들/딸/자녀(성별 미정) 추가
  - 형제/자매/형제자매(성별 미정) 추가
  - 고모/삼촌, 이모/외삼촌 추가
  - 배우자 연결
- **속성 편집**: 인물 클릭 시 우측 패널에서 이름, 나이, 성별, 생존 상태, 메모 편집
- **다중 선택**: Ctrl+클릭, Shift+드래그, Ctrl+A로 다중 선택 후 일괄 이동/삭제
- **복사**: 인물 정보 복사 (우클릭 메뉴)

### 💞 관계 표현
- **부부 관계**: 결혼/동거/재혼/별거/이혼 등 다양한 관계 타입
  - 실선: 현재 결혼
  - 점선: 동거
  - 이중선: 재혼
  - 빗금: 별거/이혼
- **부모-자식 관계**: sibling spine으로 형제자매 자동 연결
- **감정선 (10가지)**: 
  - 긍정적 관계: 조화, 친밀, 사랑
  - 거리감: 거리감, 단절
  - 갈등 관계: 불화, 적대
  - 특수 관계: 융합, 학대, 조종
- **감정선 편집**: 감정선 클릭 시 우측 패널에서 유형 변경 및 메모 추가

### 🎨 시각화 & 레이어
- **레이어 토글**: 이름/나이/관계선/감정선/범례 개별 표시/숨김
- **선 굵기 조정**: 인물 테두리, 관계선, 감정선 굵기 독립 조절
- **감정선 투명도**: 복잡한 관계도에서 가독성 향상
- **그리드 모드**: 실선/점선/숨김 3가지 옵션
- **자석 정렬**: 노드 이동 시 그리드에 자동 정렬

### 📐 레이아웃 & 배치
- **자동 정렬**: 표준 가계도 형식으로 한 번에 정리
- **수동 조정**: 드래그로 자유롭게 위치 조정
- **다중 이동**: 여러 노드 선택 후 일괄 이동
- **줌 & 팬**: 
  - 마우스 휠로 확대/축소
  - 화살표 키로 캔버스 이동 (Shift+화살표로 10배 빠르게)
  - 빈 공간 드래그로 팬
- **CT 중심 배치**: 클라이언트를 화면 중앙에 자동 배치

### 💾 저장 & 내보내기
- **자동 저장**: 작업 중 주기적으로 자동 저장
- **수동 저장**: Ctrl+S 단축키 또는 저장 버튼
- **프로젝트 관리**: 최근 프로젝트 목록, 프로젝트 이름 변경
- **다양한 형식 지원**:
  - **JSON**: 프로젝트 데이터 저장 및 불러오기
  - **PNG**: 이미지로 내보내기 (프레젠테이션, 보고서용)
  - **SVG**: 벡터 이미지로 내보내기 (확대 가능, 인쇄용)
- **불러오기**: JSON 파일 드래그 앤 드롭으로 빠른 로드

### ⚙️ 설정 & 커스터마이징
- **테마**: 라이트/다크 모드 지원
- **UI 배율**: 100%~150% 조정 가능
- **프로젝트 이름**: 클릭하여 즉시 변경
- **그리드 & 자석**: 작업 스타일에 맞게 조정
- **튜토리얼**: 처음 사용자를 위한 단계별 가이드
- **설정 초기화**: 모든 설정을 기본값으로 되돌리기

### ⌨️ 생산성 기능
- **실행 취소/다시 실행**: Ctrl+Z/Ctrl+Y (최대 50단계)
- **키보드 단축키**:
  - Ctrl+S: 저장
  - Delete: 선택 삭제
  - Ctrl+A: 전체 선택
  - Esc: 선택 해제 / 도구 취소
  - 화살표: 캔버스 이동
- **컨텍스트 메뉴**: 우클릭으로 모든 주요 기능 접근
- **툴팁**: 모든 버튼에 설명 표시

### 🎓 튜토리얼 시스템
- **처음 사용자 가이드**: 주요 기능 단계별 안내
- **인터랙티브 툴팁**: 화면 상의 실시간 안내
- **언제든 다시보기**: 설정에서 튜토리얼 재시작 가능
- **건너뛰기 옵션**: 숙련 사용자를 위한 빠른 시작

## 🚀 빠른 시작

1. **시작**: `index.html` 또는 `canvas.html` 열기
2. **템플릿 선택**: 대시보드에서 적절한 템플릿 선택 (처음이라면 "1가족 3세대" 권장)
3. **인물 편집**: 
   - 인물 클릭하여 우측 패널에서 속성 편집
   - 이름, 나이, 성별, 생존 여부 등 수정
4. **관계 추가**:
   - 우클릭 메뉴로 가족 구성원 추가
   - 배우자 연결 모드로 부부 관계 설정
   - 감정선 추가로 관계 표현
5. **레이아웃 정리**: 자동정렬 버튼으로 깔끔하게 정리
6. **저장**: Ctrl+S로 저장 또는 PNG/SVG로 내보내기

## ⌨️ 단축키

### 파일 작업
- `Ctrl + S` : 저장
- `Ctrl + O` : 불러오기 (준비중)
- `Ctrl + N` : 새 문서 (준비중)

### 편집
- `Ctrl + Z` : 실행 취소
- `Ctrl + Y` / `Ctrl + Shift + Z` : 다시 실행
- `Delete` / `Backspace` : 선택 삭제
- `Ctrl + A` : 전체 선택
- `Esc` : 선택 해제 / 편집 취소

### 선택 및 편집
- `Ctrl + 클릭` : 다중 선택
- `Shift + 드래그` : 영역 선택
- `클릭` : 인물/감정선 선택 후 우측 패널에서 속성 편집

### 이동
- `화살표 키` : 캔버스 이동
- `Shift + 화살표` : 빠른 이동 (10배)
- `마우스 휠` : 줌 인/아웃
- `드래그` : 노드 이동 또는 캔버스 팬

## 🏗️ 프로젝트 구조

```
FamilyTree/
├── canvas.html              # 메인 애플리케이션 (캔버스)
├── index.html               # 대시보드 (프로젝트 선택/관리)
├── guide.html               # 사용 안내서
├── guide-page-*.html        # 상세 사용 안내 페이지들
│
├── css/
│   ├── core.css             # 핵심 CSS 변수 & 기본 스타일
│   ├── layout.css           # 레이아웃 & 그리드 시스템
│   ├── components-*.css     # UI 컴포넌트별 스타일
│   └── document-page.css    # 문서 페이지 스타일
│
├── js/
│   ├── app.js               # GenogramApp 메인 클래스
│   │
│   ├── core/                # 핵심 상태 관리
│   │   ├── AppState.js      # 전역 상태 관리
│   │   └── SelectionManager.js  # 선택 관리
│   │
│   ├── models/              # 데이터 모델
│   │   ├── Person.js        # 인물 모델
│   │   └── Relationship.js  # 관계 모델
│   │
│   ├── data/                # 템플릿 & 데이터
│   │   ├── templates.js     # 템플릿 정의
│   │   └── templateGenerator.js  # 템플릿 생성기
│   │
│   ├── render/              # 렌더링
│   │   ├── SVGRenderer.js   # SVG 렌더링
│   │   └── AutoLayout.js    # 자동 레이아웃
│   │
│   ├── operations/          # 작업 로직
│   │   ├── PersonOperations.js       # 인물 추가/편집/삭제
│   │   ├── RelationshipOperations.js # 관계 관리
│   │   └── EmotionalOperations.js    # 감정선 관리
│   │
│   ├── canvas/              # 캔버스 상호작용
│   │   ├── CanvasInteractions.js  # 드래그, 줌, 팬
│   │   └── MultiSelect.js         # 다중 선택
│   │
│   ├── file/                # 파일 작업
│   │   ├── FileOperations.js      # 저장/불러오기/내보내기
│   │   └── recentProjects.js      # 최근 프로젝트 관리
│   │
│   └── ui/                  # UI 컴포넌트
│       ├── Toolbar.js       # 상단 툴바
│       ├── PropertiesPanel.js     # 우측 속성 패널
│       ├── ContextMenu.js   # 우클릭 메뉴
│       ├── InlineEdit.js    # 인라인 편집
│       ├── Legend.js        # 범례
│       ├── Tutorial.js      # 튜토리얼 시스템
│       ├── settings.js      # 설정 모달
│       └── templateRenderer.js    # 템플릿 선택 UI
│
├── docs/                    # 문서
│   ├── PROJECT_STRUCTURE.md # 프로젝트 구조 상세 설명
│   └── QUICK_START.md       # 빠른 시작 가이드
│
└── images/                  # 이미지 리소스
    ├── guide/               # 가이드용 이미지
    └── screenshots/         # 스크린샷
```

## 🎯 주요 사용 사례

### 1. 상담 세션
- 클라이언트와 실시간으로 가계도 작성
- 관계 탐색하며 감정선 추가
- PNG로 내보내어 클라이언트에게 전달

### 2. 교육 & 프레젠테이션
- 사례 연구용 교육 자료 제작
- 가족 체계 이론 시각화
- SVG 고품질 내보내기로 출판물 제작

### 3. 연구 & 문서화
- 복잡한 가족 관계 분석
- 다세대 패턴 시각화
- JSON 데이터 백업 및 공유

## 💡 모범 사례

### 효율적인 작업 순서
1. 템플릿으로 시작
2. 세대별로 모든 인물 추가
3. 부부 관계 연결
4. 부모-자식 관계 확인
5. 인물 클릭하여 속성 편집 (이름, 나이 등)
6. 감정선 추가
7. 자동정렬로 정리
8. 저장 및 내보내기

### 생산성 팁
- 자주 Ctrl+S로 저장
- 큰 변경 전 JSON 백업
- 다중 선택으로 일괄 작업
- 컨텍스트 메뉴 활용
- 키보드 단축키 익히기
- 인물/감정선 클릭으로 속성 패널에서 빠른 편집

## 🔧 기술 스택

- **프론트엔드**: Vanilla JavaScript (ES6+)
- **렌더링**: SVG + Canvas API
- **스타일**: CSS3 (CSS Variables, Grid, Flexbox)
- **상태 관리**: 모듈화된 클래스 기반 아키텍처
- **저장소**: LocalStorage + JSON 파일
- **아키텍처**: MVC 패턴 기반 모듈 분리

## 📖 추가 문서

- [프로젝트 구조 상세](docs/PROJECT_STRUCTURE.md) - 모듈 및 폴더 구조 설명
- [빠른 시작 가이드](docs/QUICK_START.md) - 실행 방법 및 기본 사용법
- [사용 안내서](guide.html) - 완전한 사용 가이드
- [변경 이력](changelog.html) - 업데이트 내역

## 🤝 기여하기

버그 리포트나 기능 제안은 GitHub Issues를 통해 알려주세요.

## 📄 라이선스

MIT License - 자유롭게 사용, 수정, 배포할 수 있습니다.

---

**결속 (Gyeolsok)** - 가족 관계를 시각화하고 이해하는 전문가 도구
